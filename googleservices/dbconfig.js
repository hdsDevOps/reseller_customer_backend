const admin = require('firebase-admin');
//const serviceAccount = require('./dev-hds-gworkspace-firebase-adminsdk-6ke7i-aab97fb726.json'); // replace with the path to your service account key JSON file

let key_details = process.env.FIRESTORE_DETAILS || "ewogICJ0eXBlIjogInNlcnZpY2VfYWNjb3VudCIsCiAgInByb2plY3RfaWQiOiAiZGV2LWhkcy1nd29ya3NwYWNlIiwKICAicHJpdmF0ZV9rZXlfaWQiOiAiODY5NjEzMjY2MGJiNjBkZjM2Y2VlYmQ5ZjY0NGM3MDg5MTVjMWJmYSIsCiAgInByaXZhdGVfa2V5IjogIi0tLS0tQkVHSU4gUFJJVkFURSBLRVktLS0tLVxuTUlJRXZnSUJBREFOQmdrcWhraUc5dzBCQVFFRkFBU0NCS2d3Z2dTa0FnRUFBb0lCQVFDTzdmTzh3L3ZSRlR3cVxuY1ZvbmRxNWxMeEozNzRRcFZqdGVvaUJ3Y2xtU3NjT0JCYm9vaGRBdStOTERrZDl3UkpnZENhRFdVZlZDM2JneFxuSjlOOEZKa01HSDBvdHdzUXErd0p3K3g2cEtkZWdpQkw0NnJ5M1RrckFQV3JoaGYvU2F5UTU2VjM0aEkxZ2I1ZVxuampnc3FTTllUZmxjTGFkMHgrTDFVQ3VuTDRtZHJOVXA4ODdHRXVnamJxemZja2o1RXA2YTJxNERhZWRIOEhLY1xuUWxueERUT3JSdW1palpiVTJ3MTMrOTNhbEd3ZXU1SW8rNUZqL3d1c0IwemJWTStXUXBuQUtGR3hsakJsckM5VFxuK1owL2FLS0VXbVNrd25wVnQ3ekhiQTdBM3V4bVdZdVpEVTdqUlAzN0UwQk41ZlJpcU13OEV5clRTWUZjTjVNVlxuUkxiY2U2MmZBZ01CQUFFQ2dnRUFDL0gwd0FRWEZ4TWNhMUJSaXd2SnFSamFoUjNiaTBMZGhRYXRYd2h5SzZiaFxuOTh0U2tyd1Zqb29WYWVxQk9kWkVham91OEIvUVloZ1A5KzBPcVRJNjFPa2ZzMWZua1FDZjk1NzJ0QXlhYWtwd1xueURiaVIyMkNyM0U0bHU4RzNCQ1J0SzNreFNuNzFlOUpIdDQrOFVpVXlpRldJNW5kMkE0ejR4eE1wdi9RNktyMFxuVFA2bTZvTHhRQlZBbUFhZWlTSkxYQTZoRm44Q1pLK2RCK1RjUVpha3UvTFNCN2V5Wm5CbVpBVy8rbStNakYzRVxuMXpEWGZHMjBXWnMzU0dhYlEyb3EzUmhNVm9sbnMwd29rWHBFUnVyaHlidlIvS0FhVU5URWY3Q1ZkbVJrckJYc1xuUk9OMDI4VVU1MXJzRDZBWUVHbE9sNVZFYXlvbjR6YWRzdERGeWFiUXdRS0JnUUM2UUtEMS9zYVF1WVF0d2g5dFxuRFZHQ1UxY21kRnJvNTl0K1RLajVtNk5sZjh6ajNhNHEwamhqRW16Vyt5a2tCNDVUQm5CSkVWamV5MlVqK3RST1xuc3hFSC9IVm9CcHhDVGRwbmlOQStuOWd3MVNjaDZydWZHcXN3eWxiU08wNkJIS21oRzhTOFZ0YWovSnZWdjA1dFxuK1ZrTjlHS3p6QkpoZHhwWDVXcUVjVnhtUVFLQmdRREVkQnBwdThDYityajl2QUtHemVOUStEQ0phaTB6U0hobFxuNXpRcHBweStmZ0lkQlNqOEFDTHJRRnJ6ZzQ4aHJMUjJUQlpERFZGWWZvZ3RmYTB0d3FLUWozSEExVU9nalBDTVxua1h3b0g4MWNBZWFVL1orY2tGbzhYcS9OK2VYUEk5VGV6amZNQ1F5VWVkSDBYYjNycEIybGEzV2FzWS9OYzk4OFxuUWVFcUFrWGIzd0tCZ0VKa0FUeE95ZmNTdWdRWm0xd2pFRGYxZnk1TThZN3QvdmFoV3VaR3pWTEQ0SVFsSkExTlxuakIzOGxtRjNlKzNFNTcyK29NM2E2aVBZdXIrOWpHcFZPQy94bE9RMDN3UmZmZ2ZENC84K3VUQ0crb0VEakVlbFxubVBvMlZnWndiNFprY2k3a21CZE9tUW94WkZjbjcwd1NRdVZQaE5OMFhlVHlNS2krTlY3cWpiWkJBb0dCQUtvbFxuaUk3VTd4L3BDZm13c1Z1QnpJUmZRT0p6RkV6YlVuT255SFRlZWRrK2w2UDh5UjloR3QwM3NzNC92bUxEQ3RWK1xuVnJXaVBqYnYrQSsyVHB4WWU2WEtweElGWTNvVk4yMzN2MW1kR2FhN2VyTEY2MHlWZGFIZHZGUWdRTnFqeFFWb1xuQThseWVQUExnbjBzQjRha2NJekp3bVRGcnErWjBObUdrWFpwMjRsdkFvR0JBS0Y1ZXQ3REdob3BjNFNkVDJRTVxuVHU2Y0ppYVpiR1lsK01xckowUzMwYWdISmZlSWVsWVNkMWpnNnl2MTArU3d6dzh0OEV2aG1CZmNnLzJUYm94S1xuU1NsOUc2aWNzR2JSdFpValE3UmtuTXFTTHAwaENqaEt1Nk1wczZ1dVZZajY0RGFWTytGeld2cUdEL0RVa0ZROVxueXVHcFc3YWhnZkpNMFpIbVNRczRSN09ZXG4tLS0tLUVORCBQUklWQVRFIEtFWS0tLS0tXG4iLAogICJjbGllbnRfZW1haWwiOiAiZmlyZWJhc2UtYWRtaW5zZGstNmtlN2lAZGV2LWhkcy1nd29ya3NwYWNlLmlhbS5nc2VydmljZWFjY291bnQuY29tIiwKICAiY2xpZW50X2lkIjogIjExMjYxNTQ2MjgzNTQzNDI5MjY2MyIsCiAgImF1dGhfdXJpIjogImh0dHBzOi8vYWNjb3VudHMuZ29vZ2xlLmNvbS9vL29hdXRoMi9hdXRoIiwKICAidG9rZW5fdXJpIjogImh0dHBzOi8vb2F1dGgyLmdvb2dsZWFwaXMuY29tL3Rva2VuIiwKICAiYXV0aF9wcm92aWRlcl94NTA5X2NlcnRfdXJsIjogImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL29hdXRoMi92MS9jZXJ0cyIsCiAgImNsaWVudF94NTA5X2NlcnRfdXJsIjogImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL3JvYm90L3YxL21ldGFkYXRhL3g1MDkvZmlyZWJhc2UtYWRtaW5zZGstNmtlN2klNDBkZXYtaGRzLWd3b3Jrc3BhY2UuaWFtLmdzZXJ2aWNlYWNjb3VudC5jb20iLAogICJ1bml2ZXJzZV9kb21haW4iOiAiZ29vZ2xlYXBpcy5jb20iCn0=";

let key = JSON.parse(Buffer.from(key_details, 'base64').toString('utf-8'));

const serviceAccount = key;


admin.initializeApp({
  credential: admin.credential.cert(serviceAccount)
});

const db = admin.firestore();

module.exports = db;